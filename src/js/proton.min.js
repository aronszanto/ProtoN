var proton=function(){"use strict";const t={PrimNull:0,PrimString:1,PrimInt:2,PrimFloat:3,PrimBool:4,ConPair:5,ConList:6,ConObject:7},e=3,r=2147483647,n=4294967296;var i,s,u,o,f,l,a,h,p;return i=0,s=1,u=2,o=function(t){var e;do{e=(t%2?"1":"0")+(e||""),t>>=1}while(t);return e},f=function(t){return Number(t).toString(16)},l=function(t){return o(Math.abs(t)).length},a=function(t){return(1<<t)-1},h=function(t){return String.fromCharCode(t)},function(t){return String(t).charCodeAt(0)},p=function(){function t(t,e){var r,n;for(null==t&&(t=""),null==e&&(e=[]),this.buf=e.slice(),r=0,n=t.length;r<n;++r)this._bufwrite(t.charCodeAt(r))}t.displayName="BitString";var e=t.prototype;return e.buf=null,e._pos=-1,e._spill=0,e._spillen=0,e._peek=0,e._peeklen=0,e.size=function(){return this.buf.length+(this._spillen?1:0)},e.bitsize=function(){return 8*this.buf.length+this._spillen},e._bufwrite=function(t){return-1===this._pos?this.buf.push(t):(this.buf[this._pos]=t,++this._pos>=this.buf.length&&(this._pos=-1)),this},e.writebits=function(t,e){var r,n;for(e=e||l(t),r=this._spill<<e|t,e+=this._spillen;e>=8;)e-=8,n=r>>e,r&=a(e),this._bufwrite(n);return this._spill=r,this._spillen=e,this},e.flush=function(){var t;return t=this._spill,this._spillen&&(t<<=8-this._spillen,this._bufwrite(t)),this._spill=0,this._spillen=0,this},e.truncate=function(){return this.buf=[],this._pos=-1,this._spill=0,this._spillen=0,this._peek=0,this._peeklen=0,this},e._bufseek=function(t,e){var r;switch(null==e&&(e=i),e){case 1:r=this._pos+t;break;case 2:r=this.buf.length+t;break;default:r=t}return this._pos=r>=this.buf.length?-1:Math.max(0,r),this},e.seek=function(t,e){return null==e&&(e=i),this.flush(),this._peek=0,this._peeklen=0,this._bufseek(t,e),this},e.tell=function(){return-1===this._pos?this.buf.length:this._pos},e._nextbyte=function(){var t;return-1===this._pos?null:(t=this.buf[this._pos++],this._pos>=this.buf.length&&(this._pos=-1),t)},e.readbits=function(t){var e,r,n;if(0==t)return 0;for(e=this._peeklen,r=this._peek;e<t&&null!=(n=this._nextbyte());)e+=8,r=r<<8|n;return e>t?(this._peeklen=e-t,this._peek=r&a(this._peeklen),r>>=this._peeklen):(this._peeklen=0,this._peek=0),e?r:null},e.peek=function(t){var e,r,n,i,s;for(e=0,r=this._peeklen,n=this._peek,s=this._pos;r<t&&null!=(i=this._nextbyte());)e+=1,r+=8,n=n<<8|i;return 0==r?null:(r>t&&(n>>=r-t),e&&this._bufseek(s),n)},e.hasMore=function(){return null!=this.peek(1)},e.each=function(t,e){return null==e&&(e=this),this.buf.forEach(t,e),this},e.map=function(t,e){return null==e&&(e=this),this.buf.map(t,e)},e.reduce=function(t,e,r){return null==r&&(r=this),t=t.bind(this),this.buf.reduce(t,e)},e.bytearray=function(){return this.flush().buf.slice()},e.bin=function(t){return null==t&&(t=""),this.flush().buf.map(o).join(t)},e.hex=function(){return this.flush().buf.map(f).join("")},e.number=function(){return this.flush(),this.reduce(function(t,e){return t<<8|e})},e.dump=function(){return this.buf.map(h).join("")+(this._spillen?h(this._spill<<8-this._spillen):"")},e.repr=function(t){return null==t&&(t=!0),"BitString("+(t?"buf="+this.dump():"len(buf)="+this.buf.length)+", spill["+this._spillen+"]="+o(this._spill)+", tell="+this.tell()+", peek["+this._peeklen+"]="+o(this._peek)+")"},e.toString=function(){return this.flush().dump()},t}(),p.SEEK_ABSOLUTE=i,p.SEEK_RELATIVE=s,p.SEEK_FROM_EOF=u,{encode:function(i){function s(i,u){function o(t,e,r){var n=unescape(encodeURIComponent(t));e.writebits(n.length,r);for(var i=0;i<n.length;i++)e.writebits(n.charCodeAt(i),8);return e}function f(t,e){o(t,e,16)}if(null===i||void 0===i)return u.writebits(t.PrimNull,e);if("string"==typeof i)return u.writebits(t.PrimString,e),f(i,u);if("boolean"==typeof i)return u.writebits(t.PrimBool,e),u.writebits(i?1:0,1);if(Number.isInteger(i)){if(u.writebits(t.PrimInt,e),Math.abs(i)<r){u.writebits(0,1);var l=new DataView(new ArrayBuffer(4));l.setInt32(0,i,!1);for(var a=0;a<4;a+=2)u.writebits(l.getUint16(a,!1),16)}else{u.writebits(1,1);for(var h=4294967295&i,p=(i-h)/n,c=[p>>>16,65535&p,h>>>16,65535&h],a=0;a<c.length;a++)u.writebits(c[a],16)}return u}if("number"==typeof i){if(u.writebits(t.PrimFloat,e),(i+"").length<8)u.writebits(0,1),function(t,e){o(t,e,3)}(i+"",u);else{u.writebits(1,1);var l=new DataView(new ArrayBuffer(8));l.setFloat64(0,i,!1);for(var a=0;a<8;a+=2)u.writebits(l.getUint16(a,!1),16)}return u}if("[object Array]"===Object.prototype.toString.call(i)){u.writebits(t.ConList,e),u.writebits(i.length,16);for(var a=0;a<i.length;a++)u=s(i[a],u);return u}if(i===Object(i))return u.writebits(t.ConObject,e),u.writebits(Object.keys(i).length,16),Object.keys(i).forEach(function(r){u.writebits(t.ConPair,e),u=f(r,u),u=s(i[r],u)}),u;throw new Error("Error encoding object into ProtoN.")}if("[object Array]"!==Object.prototype.toString.call(i)&&i!==Object(i))throw new TypeError("ProtoN Encoding Requires a List or Object.");var u=new p;u.writebits(1,2);var o=s(i,u);return new Uint8Array(o.bytearray())},decode:function(r){function i(){throw new Error("Malformed ProtoN message.")}function s(t){return t.readbits(e)}function u(t){return t.readbits(16)}function o(t,e){for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t.readbits(8));return decodeURIComponent(escape(r))}function f(t){return o(t,u(t))}function l(t){return o(t,t.readbits(3))}function a(r){var n=r.peek(e);return n==t.ConList||n==t.ConObject}function h(r){var s=r.readbits(e);if(s==t.PrimNull)return null;if(s==t.PrimString)return f(r);if(s==t.PrimInt){if(r.readbits(1)){for(var u=new DataView(new ArrayBuffer(8)),o=0;o<4;o++)u.setUint16(2*o,r.readbits(16),!1);var a=u.getInt32(0,!1);if(a>1048575)return 1/0;var h=u.getInt32(4,!1);return a|=0,a?a*n+h:h}for(var u=new DataView(new ArrayBuffer(4)),o=0;o<2;o++)u.setUint16(2*o,r.readbits(16),!1);return u.getInt32(0,!1)}if(s==t.PrimFloat){if(r.readbits(1)){for(var u=new DataView(new ArrayBuffer(8)),o=0;o<4;o++)u.setUint16(2*o,r.readbits(16),!1);return u.getFloat64(0,!1)}return parseFloat(l(r))}if(s==t.PrimBool)return!!r.readbits(1);i()}function c(r){var n=s(r);if(n==t.ConList){for(var o=u(r),l=[],p=0;p<o;p++)a(r)?l.push(c(r)):l.push(h(r));return l}if(n==t.ConObject){for(var b=u(r),_={},p=0;p<b;p++){r.readbits(e)!=t.ConPair&&i();var w=f(r);a(r)?_[w]=c(r):_[w]=h(r)}return _}i()}if(!(r instanceof Uint8Array))throw new TypeError("proton.decode argument must be Uint8Array");var b=new p("",r);if(b.seek(0),1!=b.readbits(2))throw new Error("Unsupported ProtoN version.");return c(b)},get:function(t,e,r){var n=new XMLHttpRequest;t+="?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&"),n.open("GET",t),n.responseType="arraybuffer",n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE&&r){var t=null,e=n.response;if(e){var i=new Uint8Array(e);t=proton.decode(i)}r(t)}},n.send(e)},post:function(t,e,r){var n=proton.encode(e),i=new XMLHttpRequest;i.open("POST",t),i.setRequestHeader("Content-Type","proton"),i.responseType="arraybuffer",i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE&&r){var t=null,e=i.response;if(e){var n=new Uint8Array(e);t=proton.decode(n)}r(t)}},i.send(n)}}}();