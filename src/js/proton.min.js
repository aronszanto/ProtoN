var proton=function(){"use strict";const t={PrimNull:0,PrimString:1,PrimInt:2,PrimFloat:3,PrimBool:4,ConPair:5,ConList:6,ConObject:7},e=3,r=127,i=32767,n=2147483647,s=0x8000000000000000,o=255,u=4294967296;var a,f,l,h,b,p,c,w,_;return a=0,f=1,l=2,h=function(t){var e;do{e=(t%2?"1":"0")+(e||""),t>>=1}while(t);return e},b=function(t){return Number(t).toString(16)},p=function(t){return h(Math.abs(t)).length},c=function(t){return(1<<t)-1},w=function(t){return String.fromCharCode(t)},function(t){return String(t).charCodeAt(0)},_=function(){function t(t,e){var r,i;for(null==t&&(t=""),null==e&&(e=[]),this.buf=e.slice(),r=0,i=t.length;r<i;++r)this._bufwrite(t.charCodeAt(r))}t.displayName="BitString";var e=t.prototype;return e.buf=null,e._pos=-1,e._spill=0,e._spillen=0,e._peek=0,e._peeklen=0,e.size=function(){return this.buf.length+(this._spillen?1:0)},e.bitsize=function(){return 8*this.buf.length+this._spillen},e._bufwrite=function(t){return-1===this._pos?this.buf.push(t):(this.buf[this._pos]=t,++this._pos>=this.buf.length&&(this._pos=-1)),this},e.writebits=function(t,e){var r,i;for(e=e||p(t),r=this._spill<<e|t,e+=this._spillen;e>=8;)e-=8,i=r>>e,r&=c(e),this._bufwrite(i);return this._spill=r,this._spillen=e,this},e.flush=function(){var t;return t=this._spill,this._spillen&&(t<<=8-this._spillen,this._bufwrite(t)),this._spill=0,this._spillen=0,this},e.truncate=function(){return this.buf=[],this._pos=-1,this._spill=0,this._spillen=0,this._peek=0,this._peeklen=0,this},e._bufseek=function(t,e){var r;switch(null==e&&(e=a),e){case 1:r=this._pos+t;break;case 2:r=this.buf.length+t;break;default:r=t}return this._pos=r>=this.buf.length?-1:Math.max(0,r),this},e.seek=function(t,e){return null==e&&(e=a),this.flush(),this._peek=0,this._peeklen=0,this._bufseek(t,e),this},e.tell=function(){return-1===this._pos?this.buf.length:this._pos},e._nextbyte=function(){var t;return-1===this._pos?null:(t=this.buf[this._pos++],this._pos>=this.buf.length&&(this._pos=-1),t)},e.readbits=function(t){var e,r,i;if(0==t)return 0;for(e=this._peeklen,r=this._peek;e<t&&null!=(i=this._nextbyte());)e+=8,r=r<<8|i;return e>t?(this._peeklen=e-t,this._peek=r&c(this._peeklen),r>>=this._peeklen):(this._peeklen=0,this._peek=0),e?r:null},e.peek=function(t){var e,r,i,n,s;for(e=0,r=this._peeklen,i=this._peek,s=this._pos;r<t&&null!=(n=this._nextbyte());)e+=1,r+=8,i=i<<8|n;return 0==r?null:(r>t&&(i>>=r-t),e&&this._bufseek(s),i)},e.hasMore=function(){return null!=this.peek(1)},e.each=function(t,e){return null==e&&(e=this),this.buf.forEach(t,e),this},e.map=function(t,e){return null==e&&(e=this),this.buf.map(t,e)},e.reduce=function(t,e,r){return null==r&&(r=this),t=t.bind(this),this.buf.reduce(t,e)},e.bytearray=function(){return this.flush().buf.slice()},e.bin=function(t){return null==t&&(t=""),this.flush().buf.map(h).join(t)},e.hex=function(){return this.flush().buf.map(b).join("")},e.number=function(){return this.flush(),this.reduce(function(t,e){return t<<8|e})},e.dump=function(){return this.buf.map(w).join("")+(this._spillen?w(this._spill<<8-this._spillen):"")},e.repr=function(t){return null==t&&(t=!0),"BitString("+(t?"buf="+this.dump():"len(buf)="+this.buf.length)+", spill["+this._spillen+"]="+h(this._spill)+", tell="+this.tell()+", peek["+this._peeklen+"]="+h(this._peek)+")"},e.toString=function(){return this.flush().dump()},t}(),_.SEEK_ABSOLUTE=a,_.SEEK_RELATIVE=f,_.SEEK_FROM_EOF=l,{encode:function(u){function a(u,f){function l(t,e){return t<o?(e.writebits(0,2),e.writebits(t,8)):t<i?(e.writebits(1,2),e.writebits(t,16)):t<n?(e.writebits(2,2),e.writebits(t,32)):(e.writebits(3,2),e.writebits(t,64)),e}function h(t,e,r){var i=unescape(encodeURIComponent(t));r?e.writebits(i.length,r):l(i.length,e);for(var n=0;n<i.length;n++)e.writebits(i.charCodeAt(n),8);return e}function b(t,e){return h(t,e,null)}if(null===u||void 0===u)return f.writebits(t.PrimNull,e);if("string"==typeof u)return f.writebits(t.PrimString,e),b(u,f);if("boolean"==typeof u)return f.writebits(t.PrimBool,e),f.writebits(u?1:0,1);if(Number.isInteger(u)){f.writebits(t.PrimInt,e);var p=Math.abs(u);if(p<=r){f.writebits(0,2);var c=new DataView(new ArrayBuffer(1));c.setInt8(0,u,!1),f.writebits(c.getUint8(0,!1),8)}else if(p<=i){f.writebits(1,2);var c=new DataView(new ArrayBuffer(2));c.setInt16(0,u,!1),f.writebits(c.getUint16(0,!1),16)}else if(p<=n){f.writebits(2,2);var c=new DataView(new ArrayBuffer(4));c.setInt32(0,u,!1);for(var w=0;w<4;w+=2)f.writebits(c.getUint16(w,!1),16)}else{if(!(p<=s))throw new Error("Cannot encode integers greater than 64 bits.");f.writebits(3,2);for(var _=u<0?u+1:u,c=[0,0,0,0,0,0,0,0],w=7;w>=0;w--)c[w]=u<0?255&-_^255:255&_,_/=256;for(var w=0;w<8;w++)f.writebits(c[w],8)}return f}if("number"==typeof u){if(f.writebits(t.PrimFloat,e),(u+"").length<8)f.writebits(0,1),function(t,e){h(t,e,3)}(u+"",f);else{f.writebits(1,1);var c=new DataView(new ArrayBuffer(8));c.setFloat64(0,u,!1);for(var w=0;w<8;w+=2)f.writebits(c.getUint16(w,!1),16)}return f}if("[object Array]"===Object.prototype.toString.call(u)){f.writebits(t.ConList,e),l(u.length,f);for(var w=0;w<u.length;w++)f=a(u[w],f);return f}if(u===Object(u))return f.writebits(t.ConObject,e),l(Object.keys(u).length,f),Object.keys(u).forEach(function(r){f.writebits(t.ConPair,e),f=b(r,f),f=a(u[r],f)}),f;throw new Error("Error encoding object into ProtoN.")}if("[object Array]"!==Object.prototype.toString.call(u)&&u!==Object(u))throw new TypeError("ProtoN Encoding Requires a List or Object.");var f=new _;f.writebits(1,2);var l=a(u,f);return new Uint8Array(l.bytearray())},decode:function(r){function i(){throw new Error("Malformed ProtoN message.")}function n(t){return t.readbits(e)}function s(t){var e=t.readbits(2);return 0==e?t.readbits(8):1==e?t.readbits(16):2==e?t.readbits(32):t.readbits(64)}function o(t,e){for(var r="",i=0;i<e;i++)r+=String.fromCharCode(t.readbits(8));return decodeURIComponent(escape(r))}function a(t){return o(t,s(t))}function f(t){return o(t,t.readbits(3))}function l(r){var i=r.peek(e);return i==t.ConList||i==t.ConObject}function h(r){var n=r.readbits(e);if(n==t.PrimNull)return null;if(n==t.PrimString)return a(r);if(n==t.PrimInt){var s=Math.pow(2,r.readbits(2)+3);if(64==s){for(var o=new DataView(new ArrayBuffer(8)),l=0;l<4;l++)o.setUint16(2*l,r.readbits(16),!1);var h=o.getUint32(0,!1);(2147483648&h&&~h>2097151||!(2147483648&h)&&h>2097151)&&console.warn("Integer value too large for JavaScript. Auto rounding will occur.");var b=o.getUint32(4,!1);return h|=0,h?h*u+b:b}for(var p=s/8,o=new DataView(new ArrayBuffer(p)),l=0;l<p;l++)o.setUint8(l,r.readbits(8),!1);if(8==s)return o.getInt8(0,!1);if(16==s)return o.getInt16(0,!1);if(32==s)return o.getInt32(0,!1);i()}else{if(n==t.PrimFloat){if(r.readbits(1)){for(var o=new DataView(new ArrayBuffer(8)),l=0;l<4;l++)o.setUint16(2*l,r.readbits(16),!1);return o.getFloat64(0,!1)}return parseFloat(f(r))}if(n==t.PrimBool)return!!r.readbits(1);i()}}function b(r){var o=n(r);if(o==t.ConList){for(var u=s(r),f=[],p=0;p<u;p++)l(r)?f.push(b(r)):f.push(h(r));return f}if(o==t.ConObject){for(var c=s(r),w={},p=0;p<c;p++){r.readbits(e)!=t.ConPair&&i();var _=a(r);l(r)?w[_]=b(r):w[_]=h(r)}return w}i()}if(!(r instanceof Uint8Array))throw new TypeError("proton.decode argument must be Uint8Array");var p=new _("",r);if(p.seek(0),1!=p.readbits(2))throw new Error("Unsupported ProtoN version.");return b(p)},get:function(t,e,r){var i=new XMLHttpRequest;t+="?"+Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&"),i.open("GET",t),i.responseType="arraybuffer",i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE&&r){var t=null,e=i.response;if(e){var n=new Uint8Array(e);t=proton.decode(n)}r(t)}},i.send(e)},post:function(t,e,r){var i=proton.encode(e),n=new XMLHttpRequest;n.open("POST",t),n.setRequestHeader("Content-Type","proton"),n.responseType="arraybuffer",n.onreadystatechange=function(){if(n.readyState==XMLHttpRequest.DONE&&r){var t=null,e=n.response;if(e){var i=new Uint8Array(e);t=proton.decode(i)}r(t)}},n.send(i)}}}();